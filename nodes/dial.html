<script type="text/javascript">
  RED.nodes.registerType('dial',{
    category: 'TwilioIVR-function',
    color: '#E2D96E',
    defaults: {
      name: {value:""},
      number: {value:""},
      action: {value:"/router"},
      recordingStatusCallback: {value:"/recording-callback"},
      record: {value:false}
    },
    inputs:1,
    outputs:1,
    icon: 'arrow-in.png',
    align: 'right',
    paletteLabel: 'dial',
    label: function() {
      return this.name||"dial";
    },
  });
</script>

<script type="text/x-red" data-template-name="dial">
  <div class="form-row">
    <label for="node-input-name"><i class="icon-tag"></i> Name</label>
    <input type="text" id="node-input-name" placeholder="Name">
  </div>
  <div class="form-row">
    <label for="node-input-number"><i class="icon-tag"></i> Number</label>
    <input type="text" id="node-input-number" placeholder="XXX-XXX-XXXX">
  </div>
  <div class="form-row">
    <label for="node-input-action"><i class="icon-tag"></i> Action</label>
    <input type="text" id="node-input-action" placeholder="Action">
  </div>
  <div class="form-row">
    <input type="checkbox" id="node-input-record" style="display: inline-block; width: auto; vertical-align: top;">
    <label for="node-input-record" style="width: auto">Record call</label>
  </div>
  <div class="form-row">
    <label for="node-input-recordingStatusCallback"><i class="icon-tag"></i> Recording status callback</label>
    <input type="text" id="node-input-recordingStatusCallback" placeholder="">
  </div>
</script>

<script type="text/x-red" data-help-name="dial">
  <p>Dial another number.</p>

  <p>The default <strong>action</strong> invoked after the call is complete is to invoke the universal router at /router.</p>
  <p>Information about the outbound call will be POSTed to the action URL. For example, if the call is recorded, the URL of the recording will be in the paramter <strong>RecordingURL</strong>. See the TwiML documentation for details.
  <p>You may optionally specify a <strong>recording status callback</strong> URL to be invoked by Twilio after the call is recorded.</p>

  <h3>References</h3>
    <ul>
        <li><a href="https://www.twilio.com/docs/voice/twiml/dial">Twilio &lt;Dial&gt; documentation</a></li>
    </ul>

</script>
